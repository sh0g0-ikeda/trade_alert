# コスト計算

| 期間 | ユーザー数  | 月額コスト (目安)        | 内訳（API/サーバー/通知）            | 黒字化に必要な有料ユーザー     |
| -- | ------ | ----------------- | -------------------------- | ----------------- |
| 初期 | 〜100人  | **1,800〜2,500円**  | Marketstack 1,500円 + AWS少額 | **4〜6人**（月480円換算） |
| 成長 | 300人   | **3,500〜5,000円**  | Marketstack上位 + AWS中量      | **10〜14人**        |
| 成熟 | 1,000人 | **9,000〜12,000円** | API上位 + Lambda回数増          | **19〜25人**        |

→ 結論：
**月500円の有料ユーザーが全体の3〜5％いれば余裕で黒字化。**

---

# 1. APIコスト試算（メインコスト）

### ■ 価格APIのコール数

05 の設計で、
**ユニーク銘柄単位で API を叩く** → ここが最大の節約ポイント。

---

## 【前提】ユーザー1人あたりの登録数（現実値）

* 無料：6銘柄
* 有料：20〜40銘柄
  → ただし、被りが大きい（AAPL, TSLA, BTC など）

### → ユニーク銘柄数の推定

| ユーザー数  | ユニーク銘柄数（推定）   |
| ------ | ------------- |
| 100人   | **80〜100銘柄**  |
| 300人   | **120〜180銘柄** |
| 1,000人 | **200〜350銘柄** |

※クリプトやFXはほぼ共通なので、増えてもたかが知れてる。

---

## 【API取得回数】

無料版：4hごと（1日5回）
有料版：2hごと（1日12回）

→ **無料・有料の人数に関係なく「ユニーク銘柄数 × 実行回数」だけ増える**

---

## ケース別の月間APIコール数

### ● ケースA：ユーザー100人（ユニーク100銘柄想定）

* 無料 100% と仮定（実際はもっと下がるけど）
* 実行回数：1日5回 × 30日 = 150回
* APIコール：
  　**100銘柄 × 150回 = 15,000コール**

→ Marketstack Basic（10,000コール）を少し超える
→ **1,500円 + 追加$？**（でも実際はMarketstackは“まとめて複数銘柄取得”が可能なので 1コールで50銘柄などいける）

よって、実際は **1,500円で収まる**。

---

### ● ケースB：ユーザー300人（ユニーク150銘柄想定）

* 無料200人、有料100人（仮）
* 無料ジョブ：5回/日 × 30日 = 150回
* 有料ジョブ：12回/日 × 30日 = 360回
  → 合計：510回

**150銘柄 × 510回 = 76,500銘柄処理**

→ まとめAPIを活用すると
**510コールで済む**

Marketstack Standard（$19.99/月 ≒ 3,000円）で対応可。

---

### ● ケースC：ユーザー1,000人（ユニーク300銘柄）

合計ジョブ回数：510回/月（変わらず）

**300銘柄 × 510回 = 153,000銘柄処理 → 510 APIコール**

→ Marketstack Pro（月 49.99 USD ≒ 7,500円）が必要。

---

# 2. AWSサーバーコスト（Lambda/DynamoDB/S3/通知）

全部含めてもマジで安い。

---

## 2.1 Lambda（API + ジョブ）

* 1回あたり 50〜200ms 程度
* API呼び出しは1日数百回程度
* バッチは 510回/月

→ 全部合計しても **月200〜600円程度**。

---

## 2.2 DynamoDB

* 読み書きが少ない
* データ量も 1ユーザー数KB → 全体で数MB

→ **月100〜300円程度**

---

## 2.3 S3（スクショ解析一時保存）

* 月数百枚 × 数百kB
  → **月50〜100円**

---

## 2.4 プッシュ通知（APNs/FCM）

* 無料（Apple / Google が負担）
  → 0円

---

# 3. 総額まとめ

## ケースA：ユーザー〜100人

**月 1,800〜2,500円**

* API（Marketstack Basic）→ 1,500円
* AWS（ラムダ・DynamoDB・S3）→ 300〜1,000円

---

## ケースB：ユーザー〜300人

**月 3,500〜5,000円**

* API → 3,000円前後
* AWS → 500〜1,000円

---

## ケースC：ユーザー〜1,000人

**月 9,000〜12,000円**

* API → 7,500円前後
* AWS → 1,500〜2,000円

---

# 4. 黒字化条件（損益分岐点）

月額有料プラン価格：**480〜580円**
ここでは **月500円** で計算。

---

## ケース別の黒字ライン

### ● ユーザー100人

月コスト：2,000円
黒字に必要な有料ユーザー：
**2,000 ÷ 500 = 4人（4%）**

---

### ● ユーザー300人

月コスト：4,500円
**9人（3%）**

---

### ● ユーザー1,000人

月コスト：10,000円
**20人（2%）**

---

# 5. 結論（経営的にも美味しい）

* 価格APIは「ユニーク銘柄 × バッチ回数」だけなので、**人数が増えてもコストはほぼ一定**
* 1000人いってもAPIコストは1万円以下
* 月500円の有料課金を **2〜5%** の軽い転換率で黒字
* 事業として非常に安定しやすい

